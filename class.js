/*!
 * Class.js v0.1.0
 * Small, fast, elegant, powerful, and cross platform JavaScript OOP library. Support class, inheritance, namespace, private and more.
 * @snandy 2013-08-11 15:31:15
 *
 */
~function(t,e){function n(t,e){if(t.length===+t.length)for(var n=0;t.length>n;n++)e(t[n],n,t);else for(var i in t)e(t[i],i,t)}function i(t){return n(a.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t}function r(e,n){this.type=e,this.scope=n||t,this.listeners=[]}function s(n,i){if(!c.isString(n))throw Error("classPath must be a string");i=c.isObject(i)?i:t;for(var r=n.split("."),s=i,o=r.pop();r.length;){var f=r.shift(),a=s[f];a||(s[f]=a={}),s=a}var u=s[o];if(c.isFunction(u))throw Error(o+" is already defined");return s[o]=e,{namespace:s,className:o}}function o(t,e,n){function r(){c.isFunction(this.init)&&this.init.apply(this,arguments)}if(!n){if(!e)throw Error("class create failed, verify definitions");n=e,e=Object}r.toString=function(){return t};var f=e.prototype,a=r.prototype=l(f);if(a.constructor=n,n.call(a,f),i(a,u),o.amd)return r;var h=s(t,o.globalNamespace);h.namespace[h.className]=r}var c={},f=Object.prototype.toString,a=Array.prototype.slice;n(["Array","Boolean","Function","Object","String","Number"],function(t){c["is"+t]=function(e){return f.call(e)==="[object "+t+"]"}}),r.prototype={subscribe:function(t,e,n){var i=this.listeners;if(!t||-1!==this._find(t,e))return!1;var r={fn:t,scope:e||this.scope,opt:n};return this.firing&&(i=this.listeners=i.slice(0)),i.push(r),!0},unsubscribe:function(t,e){if(!t)return this.clear();var n=this._find(t,e);return-1!==n?(this._delete(n),!0):!1},publish:function(){var t,e,n=this.listeners,i=n.length,r=0;if(i>0)for(this.firing=!0;e=n[r++];)if(t=a.call(arguments,0),e.opt&&t.push(e.opt),e&&e.fn.apply(e.scope,t)===!1)return this.firing=!1;return this.firing=!1,!0},clear:function(){for(var t=this.listeners.length,e=t;e--;)this._delete(e);return this.listeners=[],t},_find:function(t,e){for(var n,i=this.listeners,r=i.length;r--;)if((n=i[r])&&n.fn===t&&(!e||n.scope===e))return r;return-1},_delete:function(t){var e=this.listeners,n=e[t];n&&(delete n.fn,delete n.scope,delete n.opt),e.splice(t,1)}};var u={on:function(t,e,n,i){var s,o;if("object"==typeof t){i=t;for(t in i)i.hasOwnProperty(t)&&(s=i[t],this.on(t,s.fn||s,s.scope||i.scope,s.fn?s:i))}else this._events=this._events||{},o=this._events[t]||!1,o||(o=this._events[t]=new r(t,this)),o.subscribe(e,n,i)},off:function(t,e,n){var i,r,s;if("object"==typeof t){s=t;for(t in s)s.hasOwnProperty(t)&&(i=s[t],this.un(t,i.fn||i,i.scope||s.scope))}else r=this._events[t],r&&r.unsubscribe(e,n)},clearEvent:function(t){var e=this._events&&this._events[t];e&&e.clear()},fire:function(t){var e;return this._events&&(e=this._events[t])?e.publish.apply(e,a.call(arguments,1)):!0}},l=Object.create?function(t){return Object.create(t)}:function(){function t(){}return function(e){return t.prototype=e,new t}}();o.statics=function(t,e){i(t,e)},o.methods=function(t,e,n){var i=t.prototype;for(var r in e){if(!c.isFunction(e[r]))throw Error(r+" is not a function");n?i[r]=e[r]:i[r]||(i[r]=e[r])}return t},o.agument=function(t){var e=!1,i=a.call(arguments,1);return c.isBoolean(t)&&(e=!0,t=arguments[1],i=a.call(arguments,2)),n(i,function(n){o.methods(t,n,e)}),t},"object"==typeof exports?exports.Class=o:"function"==typeof define&&define.amd?(o.amd=!0,define("Class",[],function(){return o})):t.Class=o}(this);